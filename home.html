<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Comparte y descubre recetas de cocina con la comunidad" />
    <meta name="theme-color" content="#4CAF50" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="Recetas Gourmet" />
    
    <title>Cocina Comunitaria</title>
    
    <!-- PWA Icons -->
    <link rel="icon" type="image/png" sizes="32x32" href="assets/icons/icon-32x32.png" />
    <link rel="apple-touch-icon" href="assets/icons/icon-192x192.png" />
    <link rel="manifest" href="manifest.json" />
    
    <!-- Styles -->
    <link rel="stylesheet" href="css/variables.css" />
    <link rel="stylesheet" href="css/styles.css" />
  </head>
  <body>
    <header class="header">
      <div class="container">
        <h1 class="logo">Recetas <span class="highlight">Gourmet</span></h1>
        <nav class="nav">
          <a href="home.html" class="nav-link active">Inicio</a>
          <a href="agregar.html" class="nav-link" data-protegido>Agregar Receta</a>
          <a href="categorias.html" class="nav-link" data-protegido>Categor√≠as</a>
        </nav>
        <div class="auth-buttons">
          <span class="usuario" data-usuario></span>
          <button id="btn-logout" class="btn btn-outline" data-auth="logout">Cerrar Sesi√≥n</button>
        </div>
        <button id="toggle-tema" class="boton-tema">üåì Cambiar tema</button>
      </div>
    </header>

    <main class="main container">
      <section class="hero">
        <h2 class="hero-title">Bienvenido a Cocina Comunitaria</h2>
        <p class="hero-subtitle">Comparte y descubre las mejores recetas</p>
      </section>

      <!-- Contenido protegido -->
      <section class="recetas-grid" data-protegido>
        <div class="filtros-recetas">
          <div class="buscador">
            <input type="text" id="buscador-recetas" placeholder="Buscar por nombre..." class="buscador-input" />
            <select id="filtro-categoria" class="buscador-select">
              <option value="">Todas las categor√≠as</option>
              <option value="Desayuno">Desayuno</option>
              <option value="Almuerzo">Almuerzo</option>
              <option value="Cena">Cena</option>
              <option value="Postre">Postre</option>
              <option value="Bebida">Bebida</option>
            </select>
          </div>
          <button id="btn-limpiar-recetas" class="btn btn-reset">üßπ Limpiar</button>
        </div>

        <div id="recetas-list" class="recetas-grid">
          <!-- Las recetas se cargar√°n din√°micamente -->
        </div>
      </section>

      <!-- Estad√≠sticas (solo para usuarios autenticados) -->
      <section class="estadisticas" data-protegido>
        <h2>Estad√≠sticas</h2>
        <div class="estadisticas-grid">
          <div class="estadistica-card">
            <h3>Ingredientes m√°s usados</h3>
            <canvas id="grafico-ingredientes"></canvas>
          </div>
          <div class="estadistica-card">
            <h3>Recetas por categor√≠a</h3>
            <canvas id="grafico-categorias"></canvas>
          </div>
        </div>
      </section>
    </main>

    <footer class="footer">
      <div class="container">
        <p>&copy; 2025 Cocina Comunitaria. Todos los derechos reservados.</p>
      </div>
    </footer>

    <!-- Scripts -->
    <script type="module">
      import { inicializarAuthMiddleware } from './js/auth-middleware.js';
      import { inicializarAuth } from './js/auth.js';
      import { inicializarRecetas } from './js/recetas.js';
      import { inicializarEstadisticas } from './js/estadisticas.js';
      import { inicializarTema } from './js/tema.js';
      import { inicializarNotificaciones } from './js/notificaciones.js';

      // Inicializar autenticaci√≥n y middleware
      inicializarAuth();
      inicializarAuthMiddleware();

      // Inicializar otras funcionalidades solo si el usuario est√° autenticado
      if (document.querySelector('[data-protegido]').style.display !== 'none') {
        inicializarRecetas();
        inicializarEstadisticas();
        inicializarNotificaciones();
      }

      // Inicializar tema (siempre disponible)
      inicializarTema();
    </script>
  </body>
</html> 